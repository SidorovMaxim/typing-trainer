(this["webpackJsonptyping-trainer"]=this["webpackJsonptyping-trainer"]||[]).push([[0],{18:function(e,t,s){},19:function(e,t,s){},21:function(e,t,s){"use strict";s.r(t);var a,n=s(1),r=s.n(n),c=s(8),i=s.n(c),u=(s(18),s(2)),o=(s(19),s(0)),j=function(){return Object(o.jsx)("header",{children:Object(o.jsx)("a",{className:"logo",href:"./",children:"Typing Trainer"})})},l=function(e){var t=e.handleStart;return Object(o.jsx)("button",{className:"button-start",onClick:t,children:"I'm ready!"})},h=function(){return Object(o.jsx)("a",{className:"button-restart",href:"./",children:"Restart"})},b=s(12),m=s(7),d=s(9),O=s(10),x=s(3),f=s(13),p=s(11),v=function(e){Object(f.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).state={error:null,isLoaded:!1,gameOver:!1,chars:[]},a.previous={charNum:-1},a.getLoremIpsum=a.getLoremIpsum.bind(Object(x.a)(a)),a.charsToArray=a.charsToArray.bind(Object(x.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(x.a)(a)),a}return Object(O.a)(s,[{key:"getLoremIpsum",value:function(){var e=this;fetch("https://baconipsum.com/api/?type=meat-and-filler&sentences=3&format=text").then((function(e){return e.text()})).then((function(t){e.setState({isLoaded:!0,chars:t}),e.charsToArray()}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"charsToArray",value:function(){var e=this.props,t=e.setNumOfChars,s=e.start\u0421ounter,a=this.state.chars.replace(/\s\s/g," ").split("").map((function(e,t){return{value:e,className:"char"}}));a[0].className="char_current",t(a.length),this.setState({chars:a}),s()}},{key:"componentDidMount",value:function(){var e=document.querySelector(".fake-input");this.getLoremIpsum(),e.focus(),e.addEventListener("input",this.handleInputChange)}},{key:"handleInputChange",value:function(){var e=this,t=this.previous,s=this.state.chars,a=this.props,n=a.current,r=a.mistakes,c=a.finalText,i=a.setCurrent,u=a.setMistakes,o=a.setFinalText,j=a.handleFinish,l=document.querySelector(".fake-input");if(0!==s.length&&2===l.value.length){var h=function(e,t){s[e]=Object(m.a)(Object(m.a)({},s[e]),{},{className:"char_".concat(t)})};s[n].value===l.value[1]?(h(n,"correct"),function(){if(n===s.length-1)e.setState({gameOver:!0}),l.removeEventListener("input",e.handleInputChange),l.blur(),j()}(),h(n+1,"current"),i(n+1)):(h(n,"incorrect"),u(r+1)),t.charNum!==n&&(o([].concat(Object(b.a)(c),[s[n]])),t.charNum++),this.setState({chars:s})}l.value="_"}},{key:"render",value:function(){var e=this.props.finalText,t=this.state,s=t.error,a=t.isLoaded,n=t.gameOver,r=t.chars,c=function(e){return e.map((function(e,t){return Object(o.jsx)("span",{className:e.className,children:e.value},"char_"+t)}))};return s?Object(o.jsxs)("div",{children:["Error: ",s.message]}):n?c(e):a&&"object"===typeof r?c(r):Object(o.jsx)("div",{children:"Loading..."})}}]),s}(r.a.PureComponent),N=function(){var e=Object(n.useContext)(E).counterTime,t=Math.round(e/1e3);return Object(o.jsxs)("span",{className:"params",children:[Object(o.jsx)("div",{className:"params-name",children:"Time:"}),Object(o.jsx)("div",{className:"params-value",children:t}),Object(o.jsx)("div",{className:"params-units",children:"sec"})]})},g=function(){var e=Object(n.useContext)(E).mistakes;return Object(o.jsxs)("span",{className:"params",children:[Object(o.jsx)("div",{className:"params-name",children:"Mistakes:"}),Object(o.jsx)("div",{className:"params-value",children:e})]})},C=function(){var e=Object(n.useContext)(E),t=e.mistakes,s=e.numOfChars,a=Math.round(10*(s-t)*100/s)/10,r={r:a>75?1020-10.2*a:255,g:a>75?4.08*a-204:102,b:102},c="rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")");return Object(o.jsxs)("span",{className:"params",children:[Object(o.jsx)("div",{className:"params-name",children:"Accuracy:"}),Object(o.jsx)("div",{className:"params-value",style:{color:c},children:isNaN(a)?100:a}),Object(o.jsx)("div",{className:"params-units",children:"%"})]})},k=function(){var e=Object(n.useContext)(E),t=e.current,s=e.counterTime,a=Math.round(t/(s/1e3/60)),r={r:a<150?255-1.7*a:0,g:a<150?102+.68*a:204,b:102},c="rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")");return Object(o.jsxs)("span",{className:"params",children:[Object(o.jsx)("div",{className:"params-name",children:"Speed:"}),Object(o.jsx)("div",{className:"params-value",style:{color:c},children:isNaN(a)?0:a}),Object(o.jsx)("div",{className:"params-units",children:"chars/min"})]})},y=function(){var e=Object(n.useContext)(E),t=e.current,s=e.mistakes,a=e.numOfChars,r=e.counterTime,c=Math.round(t/(r/1e3/60)*(a-s)/a);return Object(o.jsxs)("div",{className:"score",children:["Your score: ",c]})},T=function(){return Object(o.jsxs)("div",{className:"notice-container",children:["Type as quickly as possible,",Object(o.jsx)("br",{}),"making fewer mistakes,",Object(o.jsx)("br",{}),"to get a better score.",Object(o.jsx)("div",{className:"prompt",children:'Press "Enter" to start'})]})},S=function(){return Object(o.jsxs)("div",{className:"params-container",children:[Object(o.jsx)(N,{}),Object(o.jsx)(g,{}),Object(o.jsx)(C,{}),Object(o.jsx)(k,{})]})},L=function(e){var t=e.start\u0421ounter,s=e.handleFinish,a=Object(n.useContext)(E),r=a.current,c=a.mistakes,i=a.finalText,u=a.setCurrent,j=a.setMistakes,l=a.setFinalText,h=a.setNumOfChars;return Object(o.jsxs)("div",{className:"text-container",children:[Object(o.jsx)("input",{className:"fake-input",type:"text",defaultValue:"_"}),Object(o.jsx)(v,{current:r,mistakes:c,finalText:i,setCurrent:u,setMistakes:j,"start\u0421ounter":t,setFinalText:l,handleFinish:s,setNumOfChars:h})]})},I=function(){return Object(o.jsxs)("div",{className:"score-container",children:[Object(o.jsx)("div",{className:"result",children:"Good job!"}),Object(o.jsx)(y,{})]})},F=function(){var e=Object(n.useContext)(E).setCounterTime,t=Object(n.useState)("preparation"),s=Object(u.a)(t,2),r=s[0],c=s[1],i=function(e){"Enter"===e.key&&j()},j=function(){document.removeEventListener("keydown",i),c("start")};Object(n.useEffect)((function(){document.addEventListener("keydown",i)}),[]);var b=Object(o.jsx)(L,{"start\u0421ounter":function(){var t=(new Date).getTime();a=setInterval((function(){e((new Date).getTime()-t)}),1e3)},handleFinish:function(){clearInterval(a),c("finish")}});return"start"===r?Object(o.jsxs)("section",{children:[Object(o.jsx)(S,{}),b,Object(o.jsx)(h,{})]}):"finish"===r?Object(o.jsxs)("section",{children:[Object(o.jsx)(S,{}),b,Object(o.jsx)(I,{}),Object(o.jsx)(h,{})]}):"preparation"===r?Object(o.jsxs)("section",{children:[Object(o.jsx)(T,{}),Object(o.jsx)(l,{handleStart:j})]}):void 0},M=function(){return Object(o.jsx)("footer",{})},E=Object(n.createContext)();var w=function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),s=t[0],a=t[1],r=Object(n.useState)(0),c=Object(u.a)(r,2),i=c[0],l=c[1],h=Object(n.useState)([]),b=Object(u.a)(h,2),m=b[0],d=b[1],O=Object(n.useState)(0),x=Object(u.a)(O,2),f=x[0],p=x[1],v=Object(n.useState)(0),N=Object(u.a)(v,2),g=N[0],C=N[1];return Object(o.jsxs)(E.Provider,{value:{current:s,setCurrent:a,mistakes:i,setMistakes:l,finalText:m,setFinalText:d,numOfChars:f,setNumOfChars:p,counterTime:g,setCounterTime:C},children:[Object(o.jsx)(j,{}),Object(o.jsx)(F,{}),Object(o.jsx)(M,{})]})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,22)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),A()}},[[21,1,2]]]);
//# sourceMappingURL=main.4f6f0c57.chunk.js.map